<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0066)http://www.macromedia.com/support/flash/ts/documents/ampersand.htm -->
<HTML><HEAD><TITLE>Macromedia - Attempts to send data from a Flash movie to a server are not working</TITLE>
<META http-equiv=Content-Type content="text/html; charset=windows-1252">
<META http-equiv=Last-Modified content="Thu, 13 Jan 2000 17:10:12 GMT">
<META http-equiv=Version content=1.0 name=DOCVERSION>
<META content="Thu, 13 Jan 2000 17:10:12 GMT" name=LASTMODIFIED>
<META content="Tips &amp; Tricks" name=AREA>
<META content=Yes name=PUBLIC>
<META content="Matt Wobensmith" name=AUTHOR>
<META content=3 name=IMPORTANCE>
<META 
content="ASP, CGI, Load Variables, Get URL, query string, ampersand, send using GET, send using POST, server" 
name=KEYWORDS>
<META content=All name=PLATFORM>
<META content=Flash name=PRODUCT>
<META content=4 name=VERFROM>
<META content=4 name=VERTO>
<META content=4 name=VERSIONS>
<META 
content="Attempts to send data from a Flash movie to a server are not working" 
name=DOCTITLE>
<META content=14234 name=DOCID>
<META content=Done! name=STATUS>
<META content="January 13, 2000" name=DATECREATED>
<META content="January 26, 2000" name=DATEMODIFIED>
<META content=TechNote name=KIND>
<META content="MSHTML 5.50.3825.1300" name=GENERATOR></HEAD>
<BODY vLink=#660033 aLink=#000000 link=#333399 bgColor=#ffffff><!-- begin flash TechNotes top fragment -->
<TABLE cellSpacing=0 cellPadding=0 border=0>
  <TBODY>
  <TR>
    <TD vAlign=bottom noWrap><IMG height=17 src="ampersand_files/pixel.gif" 
      width=18 border=0><A target=_top href="http://www.macromedia.com/"><IMG 
      height=12 alt=macromedia src="ampersand_files/crumb_macromedia_blue.gif" 
      width=99 border=0></A><IMG height=12 alt=: 
      src="ampersand_files/crumb_colon.gif" width=15 border=0><A target=_top 
      href="http://www.macromedia.com/software/"><IMG height=12 alt=products 
      src="ampersand_files/crumb_products_blue.gif" width=69 border=0></A><IMG 
      height=12 alt=: src="ampersand_files/crumb_colon.gif" width=15 border=0><A 
      target=_top href="http://www.macromedia.com/software/flash/"><IMG 
      height=12 alt=flash src="ampersand_files/crumb_flash_blue.gif" width=40 
      border=0></A><IMG height=12 alt=: src="ampersand_files/crumb_colon.gif" 
      width=15 border=0><A target=_top 
      href="http://www.macromedia.com/support/flash/"><IMG height=12 alt=support 
      src="ampersand_files/crumb_support_blue.gif" width=61 border=0></A><IMG 
      height=12 alt=: src="ampersand_files/crumb_colon.gif" width=15 border=0><A 
      href="http://www.macromedia.com/support/flash/technotes.html"><IMG 
      height=12 alt=technotes src="ampersand_files/crumb_technotes_blue.gif" 
      width=79 border=0></A></TD></TR></TBODY></TABLE><IMG height=30 
src="ampersand_files/pixel.gif" width=2 border=0>
<TABLE cellSpacing=0 cellPadding=0 width="95%" border=0>
  <TBODY>
  <TR>
    <TD vAlign=top align=right width="10%"><IMG height=60 alt="flash icon" 
      src="ampersand_files/flash_logo.gif" width=72 border=0> <IMG height=2 
      src="ampersand_files/pixel.gif" width=120 border=0> </TD>
    <TD vAlign=top width="90%"><IMG height=34 alt="flash technotes" 
      src="ampersand_files/head_technotes.gif" width=134 border=0> 
      <HR width="100%" noShade SIZE=1>
<!-- at this point we are inside a table inside a table -->
      <H3><FONT face="Arial, Helvetica, sans-serif" size=+1><B>Attempts to send 
      data from a Flash movie to a server are not working</B></FONT></H3>
      <TABLE cellSpacing=1 cellPadding=5 border=1>
        <TBODY>
        <TR>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Product: 
            </B></FONT><FONT face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>Flash</FONT> </TD>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Platform: 
            </B></FONT><FONT face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>All</FONT> </TD>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Versions: 
            </B></FONT><FONT face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>4</FONT> </TD>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>ID: 
            </B></FONT><FONT face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>14234</FONT> </TD></TR></TBODY></TABLE>
      <P><!--mm-contents --><FONT face="Arial, Helvetica, sans-serif" 
      size=3><B>Issue</B></FONT> <FONT face="Geneva, Arial, Helvetica" 
      size=2><BR>Using the Load Variables or Get URL action to pass data from a 
      Flash movie in a browser to the server is not working. The server-side 
      application does not record the variable information. This only happens 
      when using the Flash Player 4.0r20 (Macintosh) and 4.0r25 
      (Windows).</FONT> 
      <P><FONT face="Arial, Helvetica, sans-serif" 
      size=3><B>Reason</B></FONT><BR><FONT face="Geneva, Arial, Helvetica" 
      size=2>This version of the Flash Player is inserting an extra ampersand 
      character when passing variables from a Flash movie. This will affect 
      users who are sending data to a server-side mechanism, such as ASP or 
      CGI.</FONT> 
      <P><FONT face="Geneva, Arial, Helvetica, sans-serif" size=2>The extra 
      ampersand is inserted as the first character in passed variables. It can 
      affect movies using the GET or POST method. Because of this additional 
      character, it may prevent the destination file from receiving the data if 
      it is not written to expect the extra ampersand.</FONT> 
      <P><FONT face="Geneva, Arial, Helvetica, sans-serif" size=2>This is a 
      problem with the currently available Flash Player. It is unique to these 
      release versions and does not affect any other versions of the Flash 
      Player.</FONT></P>
      <P><FONT face="Geneva, Arial, Helvetica, sans-serif" 
      size=2><B>Example:</B></FONT><BR>
      <TABLE cellPadding=4 width=400>
        <TBODY>
        <TR>
          <TD vAlign=top width=15 height=27><IMG height=10 alt=">" 
            src="ampersand_files/tri.gif" width=14 vspace=2></TD>
          <TD vAlign=top width=361 height=27><FONT 
            face="Geneva, Arial, Helvetica, sans-serif" size=2>This is a normal 
            URL followed by a query string:</FONT></TD></TR>
        <TR>
          <TD vAlign=top width=15 height=27>&nbsp;</TD>
          <TD vAlign=top width=361 height=27><FONT 
            face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>http://www.domain.com/page.asp?name=john</FONT></TD></TR>
        <TR>
          <TD vAlign=top width=15 height=29><IMG height=10 alt=">" 
            src="ampersand_files/tri.gif" width=14 vspace=2></TD>
          <TD vAlign=top width=361 height=29><FONT 
            face="Geneva, Arial, Helvetica, sans-serif" size=2>This is a URL 
            with a query string, and an extra ampersand: </FONT></TD></TR>
        <TR>
          <TD vAlign=top width=15 height=29>&nbsp;</TD>
          <TD vAlign=top width=361 height=29><FONT 
            face="Geneva, Arial, Helvetica, sans-serif" 
            size=2>http://www.domain.com/page.asp?<B>&amp;</B>name=john</FONT> 
          </TD></TR></TBODY></TABLE>
      <P><FONT face="Arial, Helvetica, sans-serif" size=3><B>Solution 
      </B></FONT><BR><FONT face="Geneva, Arial, Helvetica" size=2>There are 
      several design and scripting workarounds to this problem. </FONT>
      <P><FONT face="Geneva, Arial, Helvetica" size=2><B>The solutions listed 
      below will work regardless of which version of the Flash 4 Player the user 
      has installed</B>. </FONT>
      <TABLE cellPadding=4 width=500>
        <TBODY>
        <TR>
          <TD vAlign=top width=15><IMG height=9 alt=">" 
            src="ampersand_files/tri.gif" width=15 vspace=2> </TD>
          <TD vAlign=top width=485>
            <P><FONT face="Geneva, Arial, Helvetica" size=2>The receiving script 
            could be written to expect the extra character as part of the name 
            of the first variable received. Therefore, a "dummy" variable could 
            be created in the Flash movie whose name would be prefixed by the 
            extra ampersand when passed. When Flash sends data from the movie to 
            the server, it sends the name/value pairs in the order they were 
            created. Theoretically, this would be the first variable declared in 
            the movie, in the first frame action. Since this variable - which is 
            not needed in the movie or script - is the only one affected, the 
            other variables and values should be accessible for server-side 
            processing. <BR><BR>This may be the easiest solution for this 
            problem, as it requires minor changes to most movies. However, this 
            should be experimented with, due to the complexity of some Flash 
            projects and some server-side scripts.</FONT> </P></TD></TR>
        <TR>
          <TD vAlign=top width=15><IMG height=9 alt=">" 
            src="ampersand_files/tri.gif" width=15 vspace=2> </TD>
          <TD vAlign=top width=485>
            <P><FONT face="Geneva, Arial, Helvetica" size=2>The advantage to 
            using Send Using GET with the GetURL action is that all of the 
            variable information from the current timeline will be collected for 
            output automatically and passed on the query string. However, if 
            only a few values are to be passed, and the author knows which 
            variables they are, it's easy to simply pass them on the end of the 
            URL using an expression.</FONT></P></TD></TR>
        <TR>
          <TD vAlign=top width=15>&nbsp;</TD>
          <TD vAlign=top width=485>
            <TABLE width=480 border=0>
              <TBODY>
              <TR>
                <TD vAlign=top width=15><B><FONT 
                  face="Geneva, Arial, Helvetica, san-serif" 
                size=2>1</FONT></B></TD>
                <TD width=465><FONT face="Geneva, Arial, Helvetica" size=2>Add 
                  the action GetURL, and set the URL field to "Expression". 
                  </FONT></TD></TR>
              <TR>
                <TD vAlign=top width=15><B><FONT 
                  face="Geneva, Arial, Helvetica, san-serif" 
                size=2>2</FONT></B></TD>
                <TD width=465><FONT face="Geneva, Arial, Helvetica" size=2>In 
                  quotes, add the URL name, followed by a question mark and the 
                  name of the first variable to pass. Add an equal sign to the 
                  end of this.</FONT></TD></TR>
              <TR>
                <TD vAlign=top width=15><B><FONT 
                  face="Geneva, Arial, Helvetica, san-serif" 
                size=2>3</FONT></B></TD>
                <TD width=465><FONT face="Geneva, Arial, Helvetica" size=2>Add 
                  the closing quotes, followed by an ampersand. Add the variable 
                  name to pass first to the end.</FONT></TD></TR>
              <TR>
                <TD vAlign=top width=15><B><FONT 
                  face="Geneva, Arial, Helvetica, san-serif" 
                size=2>4</FONT></B></TD>
                <TD width=465><FONT face="Geneva, Arial, Helvetica" size=2>To 
                  add more variables to the above, add another ampersand, an 
                  open quote, another ampersand, and the name of the next 
                  variable followed by an equals sign. Add closing quotes, 
                  another ampersand, and the name of this next variable. Repeat 
                  this step for each desired value to pass.</FONT></TD></TR>
              <TR>
                <TD vAlign=top width=15><B><FONT 
                  face="Geneva, Arial, Helvetica, san-serif" 
                size=2>5</FONT></B></TD>
                <TD width=465><FONT face="Geneva, Arial, Helvetica" 
                  size=2>Change the "Window:" setting if desired. However, leave 
                  the "Variables:" setting to "Don't Send". This is important - 
                  the variables have already been passed with the above 
                  expression. Click OK to 
        finish.</FONT></TD></TR></TBODY></TABLE></TD></TR>
        <TR>
          <TD vAlign=top width=15>&nbsp;</TD>
          <TD vAlign=top width=485><IMG height=413 
            src="ampersand_files/ampersand.gif" width=390></TD></TR>
        <TR>
          <TD vAlign=top width=15><IMG height=9 alt=">" 
            src="ampersand_files/tri.gif" width=15 vspace=2></TD>
          <TD vAlign=top width=485><FONT face="Geneva, Arial, Helvetica" 
            size=2>The extra character is only passed from Flash when the Load 
            Variables or Get URL action is sending data from the main timeline. 
            Putting all variables or "submit" buttons with these actions into a 
            movie clip will pass the data as normal, without the extra 
            character. Flash considers variables to exist only as such in the 
            timeline its in. A movie clip, in this case, is being used as a 
            "container" for the variables, unaffected by this particular 
            problem. </FONT></TD></TR>
        <TR>
          <TD vAlign=top width=15><IMG height=9 alt=">" 
            src="ampersand_files/tri.gif" width=15 vspace=2></TD>
          <TD vAlign=top width=485>
            <P><FONT face="Geneva, Arial, Helvetica" size=2>If an author wants 
            to detect which release version of the Flash Player the client is 
            using, this is now possible through a Flash scripting 
            scheme.<BR><BR>The Flash Player inserts a hidden value into the 
            Flash movie's main timeline called <FONT 
            color=#666666>$version</FONT>, which contains a string that 
            indicates which release version of the player the user has. To 
            access this value, use the <FONT color=#666666>eval</FONT> function. 
            The resulting string will contain three letters indicating the 
            user's platform, and a series of numbers indicating exact player 
            version. <BR><BR><B>Example:</B><BR><BR>MAC 4,0,20,0<BR>WIN 
            4,0,25,0<BR><BR>Using the function substring, the information can be 
            parsed and a logical statement created to decide what to do, 
            depending on this condition. <BR><BR><B>Example: </B><BR><BR><FONT 
            color=#666666>Set Variable: "player" = Eval("$version")<BR>If 
            (substring (player,9,2) eq "20" or substring (player,9,2) eq "25") 
            <BR>Set Variable: "user" = "They have the r20 or r25 player." 
            <BR>Else <BR>Set Variable: "user" = "They do not have this player." 
            <BR>End If</FONT></FONT></P></TD></TR></TBODY></TABLE>
      <P><FONT face="Arial, Helvetica, sans-serif" size=3><B>Additional 
      information</B></FONT><BR><FONT face="Geneva, Arial, Helvetica" 
      size=2>This issue has been fixed in the 4.0r26 version Flash Player. It 
      can be downloaded from the <A target=_blank 
      href="http://www.macromedia.com/shockwave/download/index.cgi?P1_Prod_Version=ShockwaveFlash">Flash 
      Player Download Center</A>.</FONT> 
      <P>&nbsp;</P><!--mm-end-contents -->
      <P>
      <TABLE cellSpacing=1 cellPadding=5 border=1>
        <TBODY>
        <TR>
          <TD colSpan=2><FONT face="Arial, Helvetica, sans-serif" 
            size=2><B>Keywords: </B></FONT><FONT 
            face="Geneva, Arial, Helvetica, sans-serif" size=2>ASP, CGI, Load 
            Variables, Get URL, query string, ampersand, send using GET, send 
            using POST, server</FONT> </TD></TR>
        <TR>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Last 
            updated: </B></FONT></TD>
          <TD><FONT face="Geneva, Arial, Helvetica, sans-serif" size=2>January 
            26, 2000</FONT> </TD></TR>
        <TR>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Author: 
            </B></FONT></TD>
          <TD><FONT face="Geneva, Arial, Helvetica, sans-serif" size=2>Matt 
            Wobensmith</FONT> </TD></TR>
        <TR>
          <TD><FONT face="Arial, Helvetica, sans-serif" size=2><B>Area: 
            </B></FONT></TD>
          <TD><FONT face="Geneva, Arial, Helvetica, sans-serif" size=2>Tips 
            &amp; Tricks</FONT> </TD></TR></TBODY></TABLE><!-- insert a little gap after the bottom table --><BR>&nbsp; 
<!-- close the table row that the body is in --></P></TD></TR>
  <TR>
    <TD vAlign=bottom align=right width="10%"><A target=_top 
      href="http://www.macromedia.com/buy/"><IMG height=21 alt=buy 
      src="ampersand_files/buy.gif" width=67 border=0></A><BR><A 
      href="http://www.macromedia.com/support/search/powersearch.html"><IMG 
      height=21 alt="power search" src="ampersand_files/search.gif" width=90 
      border=0></A><BR></TD>
    <TD>
      <CENTER>
      <HR width="100%" noShade SIZE=1>
      <BR><FONT face="Arial, Helvetica" size=-1>[<A target=_top 
      href="http://www.macromedia.com/">home</A>] [<A target=_top 
      href="http://www.macromedia.com/software/">products</A>] [<A target=_top 
      href="http://www.macromedia.com/support/">support</A>] [<A target=_top 
      href="http://www.macromedia.com/downloads/">downloads</A>] [<A target=_top 
      href="http://www.macromedia.com/macromedia/">about us</A>] [<A 
      target=mm_window 
      href="http://www.macromedia.com/OUTGOING/http://www.shockwave.com/">shockwave.com</A>] 
      [<A target=_top href="http://www.macromedia.com/help/">help</A>] <BR><FONT 
      size=-2><A href="http://www.macromedia.com/help/copyright.html">Trademarks 
      Copyright</A> ©1995-2000 Macromedia, Inc. All rights reserved. <A 
      href="http://www.macromedia.com/help/privacy.html">Privacy policy</A>. 
      </FONT><BR></FONT></CENTER></TD></TR></TBODY></TABLE><!-- whitespace required to workaround Nav 3.04 Win scrollbar bug --><BR></BODY></HTML>
